\subsection{Test setup}

Our program was written in C/C++ and compiled with Clang. All memory allocations were cache line boundary aligned. For parallelization we used C++11 cross-platform library \texttt{<thread>}.

All benchmarks were performed on a Linux desktop which has 16 GB ram and a Core i7 3770 CPU with the following specification:

\begin{itemize}
\item 4 * 3.4 GHz (Turbo Boost up to 3.9 GHz)
\item 4 * 32 KB L1 instruction cache
\item 4 * 32 KB L1 data cache (write back)
\item 4 * 256 KB L2 cache (write back)
\item Hyper-Threading
\item Shared 8 MB L3 cache (inclusive, write back)
\item 64 byte cache lines
\item The associativity for the cache levels are 8, 8 and 16 respectively
% http://www.ni.com/white-paper/11266/en#toc5
\end{itemize}

L2 cache faults and L3 cache faults were measured using Intel Performance Monitor Counter while branch mispredictions were measured using PAPI.

All tests were performed 5 times and the median was selected. The data in the matrices were randomly generated double precision floating points with
an uniform distribution. The range of the data was -1 to
1.

\subsection{Simple multiplication}

\subsubsection{Row-based layout}

\ref{fig:rnrnrn0}

\begin{figure}[h!]
  \centering
  \includegraphics[width=\textwidth]{rnrnrn0.pdf}
  \label{fig:rnrnrn0}
\end{figure}

\subsubsection{Combined row-based and column-based layout}

\ref{fig:rncnrn0}

\begin{figure}[h!]
  \centering
  \includegraphics[width=\textwidth]{rncnrn0.pdf}
  \label{fig:rncnrn0}
\end{figure}

\subsection{Recursive multiplication}

\subsubsection{Z-curve layout}

\ref{fig:zrzrzr0}

\begin{figure}[h!]
  \centering
  \includegraphics[width=\textwidth]{zrzrzr0.pdf}
  \label{fig:zrzrzr0}
\end{figure}

\subsection{Tiled layout}

\subsection{Strassen}

\todo{lig de 2 plots sammen, inkluder antal instruktioner og sig at det ikke er som forventet mht. cache faults}

\begin{figure}[h!]
  \centering
  \includegraphics[width=\textwidth]{"../project2/plots/4096/row-tiled8x8 recursive-8(tiled-bc)_column-tiled-8x8 recursive-8(generic-bc)_row-tiled8x8 recursive-8(tiled-bc)_0"}
  \caption{Recursive}
\end{figure}



\begin{figure}[h!]
  \centering
  \includegraphics[width=\textwidth]{"../project2/plots/4096/z-curve-tiled strassen-32(32-fixed-tiled-bc)_z-curve-tiled strassen-32(32-fixed-tiled-bc)_z-curve-tiled strassen-32(32-fixed-tiled-bc)_0"}
  \caption{Strassen}
\end{figure}